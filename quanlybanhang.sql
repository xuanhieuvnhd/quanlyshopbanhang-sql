CREATE DATABASE QUANLYBANHANG

 GO

 USE QUANLYBANHANG

 GO

 CREATE TABLE KHACHHANG
 (
	MAKH VARCHAR(6) NOT NULL,
	HOTEN NVARCHAR(50),
	NGSINH DATETIME,
	NGDK DATETIME,
	DIACHI NVARCHAR(50),
	SDT VARCHAR(11),
	CMND VARCHAR(10) NULL,
	EMAIL NVARCHAR(50),
	CONSTRAINT PK_MAKH PRIMARY KEY(MAKH)
)

GO 

CREATE TABLE NHANVIEN
(
	MANV VARCHAR(8) NOT NULL,
	HOTEN NVARCHAR(50),
	NGSINH DATETIME,
	BANGCAP NVARCHAR(50),
	DIACHI NVARCHAR(50),
	SDT VARCHAR(11),
	BOPHAN NVARCHAR(50),
	NGVL DATETIME,
	CONSTRAINT PK_MANV PRIMARY KEY (MANV)

)

GO

CREATE TABLE SANPHAM
(
	MASP VARCHAR(4) NOT NULL,
	TENSP NVARCHAR(50),
	HANGSX NVARCHAR(50),
	SOLUONG INT,
	GIA MONEY,
	NGNSP DATETIME,
	NGUOITN NVARCHAR(50), 
	CONSTRAINT PK_MASP PRIMARY KEY (MASP)
)

GO 

CREATE TABLE HOADON
(
	SOHD INT NOT NULL,
	MAKH VARCHAR(6),
	NGXHD DATETIME,
	MANV VARCHAR(8),
	DONGIA MONEY,
	CONSTRAINT PK_SOHD PRIMARY KEY(SOHD)
)

GO

CREATE TABLE CTHD
(
	SOHD INT,
	MASP VARCHAR(4),
	SL INT,
	CONSTRAINT PK_CTHD PRIMARY KEY (SOHD, MASP)
)
-- KHÓA NGOẠI
ALTER TABLE HOADON ADD
	CONSTRAINT FK_HD FOREIGN KEY (MAKH) REFERENCES KHACHHANG(MAKH),
	CONSTRAINT FK2_HD FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV)
ALTER TABLE CTHD ADD
	CONSTRAINT FK_CTHD FOREIGN KEY (SOHD) REFERENCES HOADON(SOHD),
	CONSTRAINT FK2_CTHD FOREIGN KEY ( MASP) REFERENCES SANPHAM(MASP)

GO

CREATE TABLE TRACUU
(
	MASP VARCHAR(4),
	TENSP NVARCHAR(50),
	HANGSX NVARCHAR(50),
	RAM VARCHAR(6) NOT NULL,
	ROM VARCHAR(6) NOT NULL,
	PIN VARCHAR(6) NOT NULL,
	CPU VARCHAR(30) NOT NULL,
	CONSTRAINT PK_TRACUU PRIMARY KEY (MASP)
)

ALTER TABLE TRACUU ADD
	CONSTRAINT FK_TRACUU FOREIGN KEY(MASP) REFERENCES SANPHAM(MASP)

GO

CREATE TABLE THONGTINBAOHANH
(
	MASP VARCHAR(4),
	TENSP NVARCHAR(50),
	NGHH DATETIME,
	HANGSX NVARCHAR(50),
	TENNM NVARCHAR(50),
	MAKH VARCHAR(6),
	NGDK DATETIME,
	SDT VARCHAR (11),
	CONSTRAINT PK_THONGTIN PRIMARY KEY(MASP, MAKH)
)

ALTER TABLE THONGTINBAOHANH ADD
	CONSTRAINT FK_THONGTIN FOREIGN KEY (MASP) REFERENCES SANPHAM(MASP),
	CONSTRAINT FK2_THONGTIN FOREIGN KEY(MAKH) REFERENCES KHACHHANG(MAKH)

SELECT * FROM KHACHHANG

INSERT INTO KHACHHANG(MAKH, HOTEN, NGSINH, NGDK, DIACHI, SDT, CMND, EMAIL) VALUES
('1111', N'NGUYỄN VĂN TÈO', '04-05-2000', '04-01-2019',N'206, Lê Lợi, Q1, Tp HCM', '0345670981', '345027083', 'TNTEO000@GMAIL.COM'),
('1112', N'LÂM ÁNH NGỌC', '07-06-2001', '03-01-2019',N'89, Nguyễn Thị Minh Khai, Q2, Tp HCM', '0973789534', '371487560', ' NGOC123@GMAIL.COM'),
('1113', N'CAO VĂN TRÍ', '02-04-2000', '04-07-2019',N'20, Bùi Đình Túy, Q5, Tp HCM', '0327865122', '342742189', 'TTRI111GMAIL.COM'),
('1114', N'PHẠM CHÍ BẢO', '01-04-2001', '01-02-2019',N'103, Nguyễn Xí, Q1, Tp HCM', '0824321897', '348437136', 'BBAO012@GMAIL.COM'),
('1115', N'LÊ THỊ AN', '09-03-2000', '12-09-2019',N'280, An Dương Vương, Q5, Tp HCM', '0983259821', '374359837', 'AANAN111GMAIL.COM'),
('1116', N'PHẠM THÚY HẰNG', '10-03-2001', '09-04-2019',N'222, Lê Văn Sỹ, Q3 ,Tp HCM', '0752165120', '326589218', 'HHANG789@GMAIL.COM'),
('1117', N'NGUYỄN HOÀNG PHÚC', '08-07-2000', '11-08-2019',N'207, Lê Lợi, Q1, Tp HCM', '0896265217', '353298750', 'PPHUC098@GMAIL.COM'),
('1118', N'TRẦN TUẤN ANH', '12-04-2001', '02-10-2019',N'50, Bạch Đằng, Q BT, Tp HCM', '0536102801', '335283179', 'ANHANH567GMAIL.COM'),
('1119', N'CAO LÂM ĐỒNG', '01-09-2000', '05-09-2019',N'222, Lê Văn Sỹ, Q3 ,Tp HCM', '0547829310', '352213242', 'ĐONGĐONG234GMAIL.COM'),
('1120', N'NGUYỄN THÁI BÌNH', '12-03-2001', '07-07-2019',N'222, Võ Văn Tần, Q5 ,Tp HCM', '0646231750', '379306800', 'BBINH678@GMAIL.COM'),
('1121', N'PHẠM VĂN ĐỒNG', '05-07-2000', '09-01-2019',N'278, An Dương Vương, Q5, Tp HCM', '0548699281', '389120427', 'VANDONG123@GMAIL.COM'),
('1122', N'LÊ NGUYỄN GIA HÂN', '08-05-2002', '02-04-2019',N'22, 3 Tháng 2, Q5 ,Tp HCM', '0423618792', '352638972', 'GIAHAN123@GMAIL.COM'),
('1123', N'TRẦN LÊ HƯNG', '10-20-2001', '12-01-2019',N'250, Cao Thắng, Q3, Tp HCM', '0321435611', '334627380', 'HUNGLE012@GMAIL.COM'),
('1124', N'ĐINH THỊ ĐÀO', '10-04-2002', '12-01-2019',N'22, Bùi Đình Túy, Q5, Tp HCM', '0532657167', '343728179', 'THIDAO098@GMAIL.COM'),
('1125', N'BÙI THÁI CHÂU', '05-11-2000', '11-01-2019',N'202, Võ Văn Tần, Q5 ,Tp HCM', '0952748615', '352316543', 'THAICHAU123@GMAIL.COM'),
('1126', N'MẠC VĂN LÂM', '04-08-2002', '10-01-2019',N'205, Lê Lợi, Q1, Tp HCM', '0325261800', '383467462', 'VANLAM555@GMAIL.COM'),
('1127', N'LƯƠNG THẾ HIỂN', '10-04-2002', '01-01-2019',N'202, Lê Lợi, Q1, Tp HCM', '0320695022', '343189786', 'THHIEN687@GMAIL.COM'),
('1128', N'TRẦN TRUNG TÍN', '09-02-2000', '09-01-2019',N'250, Bạch Đằng, Q BT, Tp HCM', '0562141968', '391237462', 'TRUNGTIN478@GMAIL.COM'),
('1129', N'VÕ NGỌC MINH THƯ', '08-04-2002', '10-01-2019',N'50, Lê Văn Sỹ, Q3 ,Tp HCM', '0458712750', '347U51268', 'MINHTHU0404@GMAIL.COM'),
('1130', N'NGUYỄN TRỌNG NGUYỄN', '07-07-2000', '11-01-2019',N'100, Cao Thắng, Q3, Tp HCM', '0916439280', '341675624', 'NGUYENTRONG09909@GMAIL.COM'),
('1131', N'LÊ THÀNH BẢO', '07-06-2002', '01-01-2019',N'150, An Dương Vương, Q5, Tp HCM', '0872365724', '356347562', 'THANHBAO560@GMAIL.COM'),
('1132', N'NGUYỄN GIA LINH', '08-06-2000', '02-01-2019',N'19, Bùi Đình Túy, Q5, Tp HCM', '0456321548', '325636423', 'GIALINH0980@GMAIL.COM'),
('1133', N'HUỲNH THÚY DUY', '03-06-2002', '03-01-2019',N'50, Nguyễn Xí, Q1, Tp HCM', '0436546568', '314879813', 'DUYDUY1234@GMAIL.COM'),
('1134', N'PHẠM THỊ THÚY KIỀU', '08-07-2000', '08-01-2019',N'50, TRần Cao Vân, Q2, Tp HCM', '0456321546', '325636423', 'DUYDUY01994@GMAIL.COM'),
('1135', N'PHAN VÔ CẢM', '08-08-2000', '07-01-2019',N'80, Bạch Đằng, Q BT, Tp HCM', '0456321547', '325636423', 'CAMCAM09909@GMAIL.COM'),
('1136', N'VÕ CAO NGUYÊN', '08-10-2000', '09-01-2019',N'89, Nguyễn Thị Minh Khai, Q2, Tp HCM', '0456321546', '325636423', 'CAONGUYEN9870@GMAIL.COM'),
('1137', N'ĐINH THỊ TÚ', '08-04-2000', '05-01-2019',N'133, Lê Văn Sỹ, Q3 ,Tp HCM', '0456321546', '325636423', 'NGUYENNGUYEN0235@GMAIL.COM'),
('1138', N'PHẠM THU HÀ', '08-10-2000', '05-01-2019',N'204, Lê Lợi, Q1, Tp HCM', '0456321546', '325636423', 'THUHA0986@GMAIL.COM'),
('1139', N'NGUYỄN THỊ THU', '08-11-2000', '04-01-2019',N'102, 3 Tháng 2, Q5 ,Tp HCM', '0456321546', '325636423', 'THUTHU879@GMAIL.COM'),
('1140', N'NGUYỄN PHƯƠNG TRÂM', '08-05-2000','04-01-2019',N'250, An Dương Vương, Q5, Tp HCM', '0456321546', '325636423', 'TRAMTRAM0980@GMAIL.COM'),
('1141', N'VÕ TÚ', '08-30-2000', '04-01-2019',N'30, Bùi Đình Túy, Q5, Tp HCM', '0456321546', '325636423', 'TUTU1234@GMAIL.COM'),
('1142', N'PHẠM DUY AN', '08-05-2000', '04-01-2019',N'204, Nguyễn Xí, Q1, Tp HCM', '0456321546', '325636423', 'ANAN01290@GMAIL.COM'),
('1143', N'TRẦN THANH THANH', '08-09-2000', '04-01-2019',N'89, Nguyễn Thị Minh Khai, Q2, Tp HCM', '0456321546', '325636423', 'THANHTHANH1234@GMAIL.COM'),
('1144', N'CAO KÌ DUYÊN', '08-07-2000', '04-01-2019',N'206, Lê Lợi, Q1, Tp HCM', '0456321544', '325636423', 'DUYENDUYEN1234@GMAIL.COM')

SELECT * FROM NHANVIEN
INSERT INTO NHANVIEN(MANV, HOTEN, NGSINH, BANGCAP, DIACHI, SDT, BOPHAN, NGVL) VALUES
('45687493',N'NGUYỄN VĂN LÀNH','05-06-1979',N'TRUNG CẤP NGHỀ',N'66, THÀNH THÁI','0356784502',N'NHÂN VIÊN BẢO VỆ','10-02-2017'),
('45011040',N'LÊ THỊ AN BÌNH','03-02-1976',N'ĐẠI HỌC',N'100,BÙI ĐÌNH TÚY','0574484502',N'BÁN HÀNG','10-02-2015'),
('45344232',N'NGUYỄN VÕ HIẾU TRUNG','10-07-2000',N'ĐẠI HỌC',N'55,NGUYỄN THƯỢNG HIỀN','0326234502',N'BÁN HÀNG','03-02-2015'),
('45346856',N'ĐINH NGUYỄN PHƯƠNG VY','01-05-1999',N'ĐẠI HỌC',N'12,HUỲNH PHÚC KHÁNG','0938289322',N'KĨ THUẬT','10-02-2017'),
('45345777',N'VÕ TRUNG HẬU','10-06-2001',N'ĐẠI HỌC',N'34,LÝ CHÍNH THẮNG','0354582562',N'TRƯỞNG PHÒNG','04-02-2017'),
('45452356',N'NGYỄN MINH KHIẾT','09-04-1987',N'ĐẠI HỌC',N'200,VÕ THỊ SÁU','0828391002',N'KĨ THUẬT','07-02-2017'),
('45796735',N'MAI LAN ANH','12-06-1979',N'CAO ĐẲNG',N'44,NGUYỄN THƯỢNG HIỀN','0204084502',N'KĨ THUẬT','12-02-2017'),
('45673675',N'NGUYỄN HÙNG DŨNG','15-05-1998',N'TÚ TÀI',N'34,NGUYỄN THƯỢNG HIỀN','0993884502',N'THỦ KHO','11-02-2015'),
('45324234',N'NGUYỄN MAI ANH','05-05-1998',N'TRUNG CẤP NGHỀ',N'102,BẠCH ĐẰNG','0308484502',N'BÁN HÀNG','10-02-2017'),
('45567235',N'NGUYỄN MINH TIẾN','06-05-1899',N'TÚ TÀI',N'34,PHẠM TUÂN','0356784502',N'BÁN HÀNG','02-02-2017'),
('45335564',N'CAO PHẠM NHẬT HUY','15-07-1967',N'TÚ TÀI',N'59,NGUYỄN THƯỢNG HIỀN','0624784502',N'KĨ THUẬT','08-02-2015'),
('45634589',N'HỒ THÁI THUẬN','05-10-1997',N'TÚ TÀI',N'32,NGUYỄN THƯỢNG HIỀN','0356780842',N'BÁN HÀNG','20-02-2015'),
('45537345',N'ĐINH NHẬT DŨNG','08-04-1998',N'TRUNG CẤP NGHỀ',N'45,LÊ VĂN SỸ','0356784502',N'BÁN HÀNG','02-02-2017'),
('45323646',N'HUỲNH MINH TRANG','15-05-1987',N'ĐẠI HỌC',N'55,BÙI ĐÌNH TÚY','0356084502',N'NHÂN VIÊN BẢO VỆ','10-02-2005'),
('45457457',N'TẠ MINH ĐỨC','01-12-1998',N'TRUNG CẤP NGHỀ',N'203,3 THÁNG 2','0223404002',N'KĨ THUẬT','10-02-2017'),
('45457458',N'PHAN MINH KHUÊ','15-05-1997',N'CAO ĐẲNG',N'3 THÁNG 2','0323423402',N'THỦ KHO','10-02-2015'),
('45457335',N'VÕ THỊ KIM TUYẾN','15-06-1983',N'CAO ĐẲNG',N'55,BÙI ĐÌNH TÚY','0623623402',N'THỦ KHO','10-02-2017')


SELECT * FROM SANPHAM
INSERT INTO SANPHAM(MASP, TENSP, HANGSX, SOLUONG, GIA, NGNSP, NGUOITN) VALUES
('01','iPhone 11 Pro Max 64GB',N'Hàng quốc Tế','50','20000000','09-09-2020',N'Huỳnh Thị Hoa'),
('02','Samsung Galaxy Note 20 Ultra',N'Hàng quốc Tế','40','29990000','10-09-2020',N'Mai Lan Anh'),
('03','OPPO Reno4',N'Hàng quốc Tế','45','8490000','09-08-2020',N'Nguyễn Tiến Đạt'),
('04','Vsmart Active1',N'Hàng nội địa','30','4990000','03-05-2020',N'Nguyễn Tiến Đạt'),
('05','Vsmart Joy 1+',N'Hàng nội địa','30','3390000','09-09-2020',N'Mai Lan Anh'),
('06','iPhone 12 Mini 256GB',N'Hàng quốc Tế','50','25990000','10-09-2020',N'Mai Lan Anh'),
('07','Vsmart Active1+',N'Hàng nội địa','30','6290000','09-09-2020',N'Nguyễn Tiến Đạt'),
('08','Samsung Galaxy Z Flip',N'Hàng quốc Tế','36000000','55','06-02-2020',N'Huỳnh Thị Hoa'),
('09','Samsung Galaxy A21s',N'Hàng quốc Tế','40','5290000','06-02-2020',N'Huỳnh Thị Hoa')

SELECT * FROM HOADON
INSERT INTO HOADON(SOHD, MAKH, NGXHD, MANV, DONGIA) VALUES
('001','1111','09-10-2020','45687493','20000000'),
('002','1121','10-10-2020','45567235','29990000'),
('003','1113','09-11-2020','45452356','25990000'),
('004','1112','06-06-2020','45324234','4990000'),
('005','1114','09-05-2021','45687493','36000000'),
('006','1130','10-09-2021','45457457','6290000'),
('007','1132','09-02-2020','45457458','5290000'),
('008','1144','10-10-2020','45335564','3390000'),
('009','1115','09-09-2020','45796735','8490000'),
('010','1120','10-10-2020','45011040','29990000')

SELECT * FROM TRACUU
INSERT INTO TRACUU(MASP, TENSP,  HANGSX, RAM, ROM, PIN, CPU) VALUES
('01','iPhone 11 Pro Max 64GB',N'Hàng quốc Tế', '4GB', '64GB', '3969mAh', 'A13 Bionic'),
('02','Samsung Galaxy Note 20 Ultra',N'Hàng quốc Tế', '12GB', '256GB', '4500mAh', N'Ecyno 990 8 nhân'),
('03','OPPO Reno4',N'Hàng quốc Tế', '8GB', '256GB', '4000mAh', N'Snapdragon 720G 8 nhân'),
('04','Vsmart Active1',N'Hàng nội địa', '4GB', '64GB', '3100mAh', N'Snapdragon 660 8 nhân'),
('05','Vsmart Joy 1+',N'Hàng nội địa', '3GB','32GB','3000mAh',N'Snapdragon 435 8 nhân'),
('06','iPhone 12 Mini 256GB',N'Hàng quốc Tế', '4GB', '256GB', N'ĐANG CẬP NHẬT', 'A14 Bionic'),
('07','Vsmart Active1+',N'Hàng nội địa', '6GB', '64GB', '3650mAh', N'Snapdragon 660 8 nhân'),
('08','Samsung Galaxy Z Flip',N'Hàng quốc Tế', '8GB', '256GB', '3300mAh', N'Qualcomm Snapdragon 855 8 nhân'),
('09','Samsung Galaxy A21s',N'Hàng quốc Tế', '6GB', '64GB', '5000mAh', N'Exynos 850 8 nhân')

SELECT * FROM THONGTINBAOHANH
INSERT INTO THONGTINBAOHANH(MASP, TENSP, NGHH, HANGSX, TENNM, MAKH, NGDK, SDT) VALUES
('01','iPhone 11 Pro Max 64GB','09-10-2021', N'Hàng quốc Tế', N'NGUYỄN VĂN TÈO','1111', '08-19-2020', '0345670981'),
('02','Samsung Galaxy Note 20 Ultra','10-10-2021', N'Hàng quốc Tế',N'PHẠM VĂN ĐỒNG','1121', '08-19-2020', '0345670981'), 
('03','OPPO Reno4','09-11-2021', N'Hàng quốc Tế',N'CAO VĂN TRÍ','1113', '08-19-2020', '0345670981'), 
('04','Vsmart Active1','06-06-2021', N'Hàng nội địa',N'LÂM ÁNH NGỌC','1112', '08-19-2020', '0345670981'), 
('05','Vsmart Joy 1+','09-05-2021', N'Hàng nội địa','1114',N'PHẠM CHÍ BẢO', '08-09-2020', '0345670981'), 
('06','iPhone 12 Mini 256GB','10-09-2022', N'Hàng quốc Tế',N'NGUYỄN TRỌNG NGUYỄN','1130', '08-09-2020', '0345670981'), 
('07','Vsmart Active1+','09-02-2021',N'Hàng nội địa','1132',N'NGUYỄN GIA LINH', '08-19-2020', '0345670981'), 
('08','Samsung Galaxy Z Flip','10-10-2021', N'Hàng quốc Tế',N'CAO KÌ DUYÊN','1144', '08-19-2020', '0345670981'), 
('09','Samsung Galaxy A21s','09-09-2021', N'Hàng quốc Tế',N'LÊ THỊ AN','1115', '08-19-2020', '0345670981') 